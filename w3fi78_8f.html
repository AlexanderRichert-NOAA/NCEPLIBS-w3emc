<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-w3emc: w3fi78.f File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-w3emc
   &#160;<span id="projectnumber">2.8.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('w3fi78_8f.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">w3fi78.f File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="w3fi78_8f_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a78a1ba5576bfc184dbcde9db7647f2c0"><td class="memItemLeft" align="right" valign="top"><a id="a78a1ba5576bfc184dbcde9db7647f2c0"></a>
subroutine&#160;</td><td class="memItemRight" valign="bottom"><b>fi7801</b> (IPTR, IDENT, MSGA, ISTACK, IWORK, ANAME, KDATA, IVALS, MSTACK, AUNITS, KDESC, MWIDTH, MREF, MSCALE, KNR, INDEX, MAXR, MAXD, IUNITB, IUNITD)</td></tr>
<tr class="separator:a78a1ba5576bfc184dbcde9db7647f2c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe2cebe5fb34bedc4e028fcaeec3eb0b"><td class="memItemLeft" align="right" valign="top"><a id="afe2cebe5fb34bedc4e028fcaeec3eb0b"></a>
subroutine&#160;</td><td class="memItemRight" valign="bottom"><b>fi7802</b> (IPTR, IDENT, MSGA, KDATA, KDESC, LL, MSTACK, AUNITS, MWIDTH, MREF, MSCALE, JDESC, IVALS, J, MAXR, MAXD)</td></tr>
<tr class="separator:afe2cebe5fb34bedc4e028fcaeec3eb0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd85631fd2ddaae2c69a597dada4bad5"><td class="memItemLeft" align="right" valign="top"><a id="abd85631fd2ddaae2c69a597dada4bad5"></a>
subroutine&#160;</td><td class="memItemRight" valign="bottom"><b>fi7803</b> (IPTR, IDENT, MSGA, KDATA, IVALS, MSTACK, MWIDTH, MREF, MSCALE, J, JDESC, MAXR, MAXD)</td></tr>
<tr class="separator:abd85631fd2ddaae2c69a597dada4bad5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adde456d0a3cdfb2ada7e27dac62ff5b4"><td class="memItemLeft" align="right" valign="top"><a id="adde456d0a3cdfb2ada7e27dac62ff5b4"></a>
subroutine&#160;</td><td class="memItemRight" valign="bottom"><b>fi7804</b> (IPTR, MSGA, KDATA, IVALS, MSTACK, MWIDTH, MREF, MSCALE, J, LL, JDESC, MAXR, MAXD)</td></tr>
<tr class="separator:adde456d0a3cdfb2ada7e27dac62ff5b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef0cfcae2b4b6aecddae061ef55c23f7"><td class="memItemLeft" align="right" valign="top"><a id="aef0cfcae2b4b6aecddae061ef55c23f7"></a>
subroutine&#160;</td><td class="memItemRight" valign="bottom"><b>fi7805</b> (IPTR, IDENT, MSGA, IWORK, LX, LY, KDATA, LL, KNR, MSTACK, MAXR, MAXD)</td></tr>
<tr class="separator:aef0cfcae2b4b6aecddae061ef55c23f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a759ea3357b94bf332300d7ae6b6e073e"><td class="memItemLeft" align="right" valign="top"><a id="a759ea3357b94bf332300d7ae6b6e073e"></a>
subroutine&#160;</td><td class="memItemRight" valign="bottom"><b>fi7806</b> (IPTR, LX, LY, IDENT, MSGA, KDATA, IVALS, MSTACK, MWIDTH, MREF, MSCALE, J, LL, KDESC, IWORK, JDESC, MAXR, MAXD)</td></tr>
<tr class="separator:a759ea3357b94bf332300d7ae6b6e073e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6daf60e47a8949569927e2dbe795dc7"><td class="memItemLeft" align="right" valign="top"><a id="ac6daf60e47a8949569927e2dbe795dc7"></a>
subroutine&#160;</td><td class="memItemRight" valign="bottom"><b>fi7807</b> (IPTR, IWORK, ITBLD, JDESC, MAXD)</td></tr>
<tr class="separator:ac6daf60e47a8949569927e2dbe795dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9b1b7dfb8dd609828a6e0db3271351f"><td class="memItemLeft" align="right" valign="top"><a id="aa9b1b7dfb8dd609828a6e0db3271351f"></a>
subroutine&#160;</td><td class="memItemRight" valign="bottom"><b>fi7808</b> (IPTR, IWORK, LF, LX, LY, JDESC, MAXD)</td></tr>
<tr class="separator:aa9b1b7dfb8dd609828a6e0db3271351f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa30ef437f8f02bfaf3482c3c496d4af5"><td class="memItemLeft" align="right" valign="top"><a id="aa30ef437f8f02bfaf3482c3c496d4af5"></a>
subroutine&#160;</td><td class="memItemRight" valign="bottom"><b>fi7809</b> (IDENT, MSTACK, KDATA, IPTR, MAXR, MAXD)</td></tr>
<tr class="separator:aa30ef437f8f02bfaf3482c3c496d4af5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c0312bb81a0d948725334348ba1cbc0"><td class="memItemLeft" align="right" valign="top"><a id="a1c0312bb81a0d948725334348ba1cbc0"></a>
subroutine&#160;</td><td class="memItemRight" valign="bottom"><b>fi7810</b> (IDENT, MSTACK, KDATA, IPTR, MAXR, MAXD)</td></tr>
<tr class="separator:a1c0312bb81a0d948725334348ba1cbc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c08a6a24a9527776d2b533108dbf261"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="w3fi78_8f.html#a9c08a6a24a9527776d2b533108dbf261">w3fi78</a> (IPTR, IDENT, MSGA, ISTACK, MSTACK, KDATA, KNR, INDEX, MAXR, MAXD, IUNITB, IUNITD)</td></tr>
<tr class="memdesc:a9c08a6a24a9527776d2b533108dbf261"><td class="mdescLeft">&#160;</td><td class="mdescRight">SUBPROGRAM: W3FI78 BUFR MESSAGE DECODER PRGMMR: CAVANAUGH ORG: NMC421 DATE:93-03-17.  <a href="w3fi78_8f.html#a9c08a6a24a9527776d2b533108dbf261">More...</a><br /></td></tr>
<tr class="separator:a9c08a6a24a9527776d2b533108dbf261"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a9c08a6a24a9527776d2b533108dbf261"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c08a6a24a9527776d2b533108dbf261">&#9670;&nbsp;</a></span>w3fi78()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine w3fi78 </td>
          <td>(</td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>IPTR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>IDENT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>MSGA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>ISTACK</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(2,maxd)&#160;</td>
          <td class="paramname"><em>MSTACK</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(maxr,maxd)&#160;</td>
          <td class="paramname"><em>KDATA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(maxr)&#160;</td>
          <td class="paramname"><em>KNR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>INDEX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>MAXR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>MAXD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>IUNITB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>IUNITD</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SUBPROGRAM: W3FI78 BUFR MESSAGE DECODER PRGMMR: CAVANAUGH ORG: NMC421 DATE:93-03-17. </p>
<p>ABSTRACT: THIS SET OF ROUTINES WILL DECODE A BUFR MESSAGE AND PLACE INFORMATION EXTRACTED FROM THE BUFR MESSAGE INTO SELECTED ARRAYS FOR THE USER. THE ARRAY KDATA CAN NOW BE SIZED BY THE USER BY INDICATING THE MAXIMUM NUMBER OF SUBSTES AND THE MAXIMUM NUMBER OF DESCRIPTORS THAT ARE EXPECTED IN THE COURSE OF DECODING SELECTED INPUT DATA. THIS ALLOWS FOR REALISTIC SIZING OF KDATA AND THE MSTACK ARRAYS. THIS VERSION ALSO ALLOWS FOR THE INCLUSION OF THE UNIT NUMBERS FOR TABLES B AND D INTO THE ARGUMENT LIST. THIS ROUTINE DOES NOT INCLUDE IFOD PROCESSING.</p>
<p>PROGRAM HISTORY LOG: 88-08-31 CAVANAUGH 90-12-07 CAVANAUGH NOW UTILIZING GBYTE ROUTINES TO GATHER AND SEPARATE BIT FIELDS. THIS SHOULD IMPROVE (DECREASE) THE TIME IT TAKES TO DECODE ANY BUFR MESSAGE. HAVE ENTERED CODING THAT WILL PERMIT PROCESSING BUFR EDITIONS 1 AND 2. IMPROVED AND CORRECTED THE CONVERSION INTO IFOD FORMAT OF DECODED BUFR MESSAGES. 91-01-18 CAVANAUGH PROGRAM/ROUTINES MODIFIED TO PROPERLY HANDLE SERIAL PROFILER DATA. 91-04-04 CAVANAUGH MODIFIED TO HANDLE TEXT SUPPLIED THRU DESCRIPTOR 2 05 YYY. 91-04-17 CAVANAUGH ERRORS IN EXTRACTING AND SCALING DATA CORRECTED. IMPROVED HANDLING OF NESTED QUEUE DESCRIPTORS IS ADDED. 91-05-10 CAVANAUGH - ARRAY 'DATA' HAS BEEN ENLARGED TO REAL*8 TO BETTER CONTAIN VERY LARGE NUMBERS MORE ACCURATELY. THE PREIOUS SIZE REAL*4 COULD NOT CONTAIN SUFFICIENT SIGNIFICANT DIGITS.</p><ul>
<li>CODING HAS BEEN INTRODUCED TO PROCESS NEW TABLE C DESCRIPTOR 2 06 YYY WHICH PERMITS IN LINE PROCESSING OF A LOCAL DESCRIPTOR EVEN IF THE DESCRIPTOR IS NOT CONTAINED IN THE USERS TABLE B.</li>
<li>A SECOND ROUTINE TO PROCESS IFOD MESSAGES (IFOD0) HAS BEEN REMOVED IN FAVOR OF THE IMPROVED PROCESSING OF THE ONE REMAINING (IFOD1).</li>
<li>NEW CODING HAS BEEN INTRODUCED TO PERMIT PROCESSING OF BUFR MESSAGES BASED ON BUFR EDITION UP TO AND INCLUDING EDITION 2. PLEASE NOTE INCREASED SIZE REQUIREMENTS FOR ARRAYS IDENT(20) AND IPTR(40). 91-07-26 CAVANAUGH - ADD ARRAY MTIME TO CALLING SEQUENCE TO PERMIT INCLUSION OF RECEIPT/TRANSFER TIMES TO IFOD MESSAGES. 91-09-25 CAVANAUGH - ALL PROCESSING OF DECODED BUFR DATA INTO IFOD (A LOCAL USE REFORMAT OF BUFR DATA) HAS BEEN ISOLATED FROM THIS SET OF ROUTINES. FOR THOSE INTERESTED IN THE IFOD FORM, SEE W3FL05 IN THE W3LIB ROUTINES. PROCESSING OF BUFR MESSAGES CONTAINING DELAYED REPLICATION HAS BEEN ALTERED SO THAT SINGLE SUBSETS (REPORTS) AND AND A MATCHING DESCRIPTOR LIST FOR THAT PARTICULAR SUBSET WILL BE PASSED TO THE USER WILL BE PASSED TO THE USER ONE AT A TIME TO ASSURE THAT EACH SUBSET CAN BE FULLY DEFINED WITH A MINIMUM OF REPROCESSING. PROCESSING OF ASSOCIATED FIELDS HAS BEEN TESTED WITH MESSAGES CONTAINING NON-COMPRESSED DATA. IN ORDER TO FACILITATE USER PROCESSING A MATCHING LIST OF SCALE FACTORS ARE INCLUDED WITH THE EXPANDED DESCRIPTOR LIST (MSTACK). 91-11-21 CAVANAUGH - PROCESSING OF DESCRIPTOR 2 03 YYY HAS CORRECTED TO AGREE WITH FM94 STANDARDS. 91-12-19 CAVANAUGH - CALLS TO FI7803 AND FI7804 HAVE BEEN CORRECTED TO AGREE CALLED PROGRAM ARGUMENT LIST. SOME ADDITIONAL ENTRIES HAVE BEEN INCLUDED FOR COMMUNICATING WITH DATA ACCESS ROUTINES. ADDITIONAL ERROR EXIT PROVIDED FOR THE CASE WHERE TABLE B IS DAMAGED. 92-01-24 CAVANAUGH - ROUTINES FI7801, FI7803 AND FI7804 HAVE BEEN MODIFIED TO HANDLE ASSOCIATED FIELDS ALL DESCRIPTORS ARE SET TO ECHO TO MSTACK(1,N) 92-05-21 CAVANAUGH - FURTHER EXPANSION OF INFORMATION COLLECTED FROM WITHIN UPPER AIR SOUNDINGS HAS PRODUCED THE NECESSITY TO EXPAND SOME OF THE PROCESSING AND OUTPUT ARRAYS. (SEE REMARKS BELOW) 92-06-29 CAVANAUGH - CORRECTED DESCRIPTOR DENOTING HEIGHT OF EACH WIND LEVEL FOR PROFILER CONVERSIONS. 92-07-23 CAVANAUGH - EXPANSION OF TABLE B REQUIRES ADJUSTMENT OF ARRAYS TO CONTAIN TABLE B VALUES NEEDED TO ASSIST IN THE DECODING PROCESS. ARRAYS CONTAINING DATA FROM TABLE B KDESC - DESCRIPTOR ANAME - DESCRIPTOR NAME AUNITS - UNITS FOR DESCRIPTOR MSCALE - SCALE FOR VALUE OF DESCRIPTOR MREF - REFERENCE VALUE FOR DESCRIPTOR MWIDTH - BIT WIDTH FOR VALUE OF DESCRIPTOR 92-09-09 CAVANAUGH - FIRST ENCOUNTER WITH OPERATOR DESCRIPTOR 2 05 YYY SHOWED ERROR IN DECODING. THAT ERROR IS CORRECTED WITH THIS IMPLEMENTATION. FURTHER TESTING OF UPPER AIR DATA HAS ENCOUNTERED THE CONDITION OF LARGE (MANY LEVEL) SOUNDINGS ARRAYS IN THE DECODER HAVE BEEN EXPANDED (AGAIN) TO ALLOW FOR THIS CONDITION. 92-10-02 CAVANAUGH - MODIFIED ROUTINE TO REFORMAT PROFILER DATA (FI7809) TO SHOW DESCRIPTORS, SCALE VALUE AND DATA IN PROPER ORDER. CORRECTED AN ERROR THAT PREVENTED USER FROM ASSIGNING THE SECOND DIMENSION OF KDATA(500,*). 92-10-20 CAVANAUGH - REMOVED ERROR THAT PREVENTED FULL IMPLEMENTATION OF PREVIOUS CORRECTIONS AND MADE CORRECTIONS TO TABLE B TO BRING IT UP TO DATE. CHANGES INCLUDE PROPER REFORMAT OF PROFILER DATA AND USER CAPABILITY FOR ASSIGNING SECOND DIMENSION OF KDATA ARRAY. 92-12-09 CAVANAUGH - THANKS TO DENNIS KEYSER FOR THE SUGGESTIONS AND CODING, THIS IMPLEMENTATION WILL ALLOW THE INCLUSION OF UNIT NUMBERS FOR TABLES B &amp; D, AND IN ADDITION ALLOWS FOR REALISTIC SIZING OF KDATA AND MSTACK ARRAYS BY THE USER. AS OF THIS IMPLEMENTATION, THE UPPER SIZE LIMIT FOR A BUFR MESSAGE ALLOWS FOR A MESSAGE SIZE GREATER THAN 10000 BYTES. 93-01-26 CAVANAUGH - SUBROUTINE FI7810 HAS BEEN ADDED TO PERMIT REFORMATTING OF PROFILER DATA IN EDITION 2.</li>
</ul>
<p>USAGE: CALL W3FI78(IPTR,IDENT,MSGA,ISTACK,MSTACK,KDATA,KNR,INDEX, MAXR,MAXD,IUNITB,IUNITD)</p>
<p>INPUT ARGUMENT LIST: MSGA - ARRAY CONTAINING SUPPOSED BUFR MESSAGE SIZE IS DETERMINED BY USER, CAN BE GREATER THAN 10000 BYTES. MAXR - MAXIMUM NUMBER OF REPORTS/SUBSETS THAT MAY BE CONTAINED IN A BUFR MESSAGE MAXD - MAXIMUM NUMBER OF DESCRIPTOR COMBINATIONS THAT MAY BE PROCESSED; UPPER AIR DATA AND SOME SATELLITE DATA REQUIRE A VALUE FOR MAXD OF 1600, BUT FOR MOST OTHER DATA A VALUE FOR MAXD OF 500 WILL SUFFICE IUNITB - UNIT NUMBER OF DATA SET HOLDING TABLE B IUNITD - UNIT NUMBER OF DATA SET HOLDING TABLE D</p>
<p>OUTPUT ARGUMENT LIST: (INCLUDING WORK ARRAYS) ISTACK - ORIGINAL ARRAY OF DESCRIPTORS EXTRACTED FROM SOURCE BUFR MESSAGE.</p>
<p>MSTACK(A,B)-LEVEL B - DESCRIPTOR NUMBER (LIMITED TO VALUE OF INPUT ARGUMENT MAXD)</p>
<p>LEVEL A = 1 DESCRIPTOR = 2 10**N SCALING TO RETURN TO ORIGINAL VALUE IPTR - UTILITY ARRAY IPTR( 1)- ERROR RETURN IPTR( 2)- BYTE COUNT SECTION 1 IPTR( 3)- POINTER TO START OF SECTION 1 IPTR( 4)- BYTE COUNT SECTION 2 IPTR( 5)- POINTER TO START OF SECTION 2 IPTR( 6)- BYTE COUNT SECTION 3 IPTR( 7)- POINTER TO START OF SECTION 3 IPTR( 8)- BYTE COUNT SECTION 4 IPTR( 9)- POINTER TO START OF SECTION 4 IPTR(10)- START OF REQUESTED SUBSET, RESERVED FOR DAR IPTR(11)- CURRENT DESCRIPTOR PTR IN IWORK IPTR(12)- LAST DESCRIPTOR POS IN IWORK IPTR(13)- LAST DESCRIPTOR POS IN ISTACK IPTR(14)- NUMBER OF TABLE B ENTRIES IPTR(15)- REQUESTED SUBSET POINTER, RESERVED FOR DAR IPTR(16)- INDICATOR FOR EXISTANCE OF SECTION 2 IPTR(17)- NUMBER OF REPORTS PROCESSED IPTR(18)- ASCII/TEXT EVENT IPTR(19)- POINTER TO START OF BUFR MESSAGE IPTR(20)- NUMBER OF LINES FROM TABLE D IPTR(21)- TABLE B SWITCH IPTR(22)- TABLE D SWITCH IPTR(23)- CODE/FLAG TABLE SWITCH IPTR(24)- ADITIONAL WORDS ADDED BY TEXT INFO IPTR(25)- CURRENT BIT NUMBER IPTR(26)- DATA WIDTH CHANGE IPTR(27)- DATA SCALE CHANGE IPTR(28)- DATA REFERENCE VALUE CHANGE IPTR(29)- ADD DATA ASSOCIATED FIELD IPTR(30)- SIGNIFY CHARACTERS IPTR(31)- NUMBER OF EXPANDED DESCRIPTORS IN MSTACK IPTR(32)- CURRENT DESCRIPTOR SEGMENT F IPTR(33)- CURRENT DESCRIPTOR SEGMENT X IPTR(34)- CURRENT DESCRIPTOR SEGMENT Y IPTR(35)- UNUSED IPTR(36)- NEXT DESCRIPTOR MAY BE UNDECIPHERABLE IPTR(37)- UNUSED IPTR(38)- UNUSED IPTR(39)- DELAYED REPLICATION FLAG 0 - NO DELAYED REPLICATION 1 - MESSAGE CONTAINS DELAYED REPLICATION IPTR(40)- NUMBER OF CHARACTERS IN TEXT FOR CURR DESCRIPTOR IDENT - ARRAY CONTAINS MESSAGE INFORMATION EXTRACTED FROM BUFR MESSAGE - IDENT( 1)-EDITION NUMBER (BYTE 4, SECTION 1) IDENT( 2)-ORIGINATING CENTER (BYTES 5-6, SECTION 1) IDENT( 3)-UPDATE SEQUENCE (BYTE 7, SECTION 1) IDENT( 4)-OPTIONAL SECTION (BYTE 8, SECTION 1) IDENT( 5)-BUFR MESSAGE TYPE (BYTE 9, SECTION 1) 0 = SURFACE (LAND) 1 = SURFACE (SHIP) 2 = VERTICAL SOUNDINGS OTHER THAN SATELLITE 3 = VERTICAL SOUNDINGS (SATELLITE) 4 = SNGL LVL UPPER-AIR OTHER THAN SATELLITE 5 = SNGL LVL UPPER-AIR (SATELLITE) 6 = RADAR IDENT( 6)-BUFR MSG SUB-TYPE (BYTE 10, SECTION 1) TYPE SBTYP 2 7 = PROFILER IDENT( 7)- (BYTES 11-12, SECTION 1) IDENT( 8)-YEAR OF CENTURY (BYTE 13, SECTION 1) IDENT( 9)-MONTH OF YEAR (BYTE 14, SECTION 1) IDENT(10)-DAY OF MONTH (BYTE 15, SECTION 1) IDENT(11)-HOUR OF DAY (BYTE 16, SECTION 1) IDENT(12)-MINUTE OF HOUR (BYTE 17, SECTION 1) IDENT(13)-RSVD BY ADP CENTERS(BYTE 18, SECTION 1) IDENT(14)-NR OF DATA SUBSETS (BYTE 5-6, SECTION 3) IDENT(15)-OBSERVED FLAG (BYTE 7, BIT 1, SECTION 3) IDENT(16)-COMPRESSION FLAG (BYTE 7, BIT 2, SECTION 3) IDENT(17)-MASTER TABLE NUMBER(BYTE 4, SECTION 1, ED 2 OR GTR) KDATA - ARRAY CONTAINING DECODED REPORTS FROM BUFR MESSAGE. KDATA(REPORT NUMBER,PARAMETER NUMBER)</p>
<p>(REPORT NUMBER LIMITED TO VALUE OF INPUT ARGUMENT MAXR AND PARAMETER NUMBER LIMITED TO VALUE OF INPUT ARGUMENT MAXD)</p>
<p>ARRAYS CONTAINING DATA FROM TABLE B ANAME - DESCRIPTOR NAME AUNITS - UNITS FOR DESCRIPTOR MSCALE - SCALE FOR VALUE OF DESCRIPTOR MREF - REFERENCE VALUE FOR DESCRIPTOR MWIDTH - BIT WIDTH FOR VALUE OF DESCRIPTOR INDEX - POINTER TO AVAILABLE SUBSET</p>
<p>SUBPROGRAMS CALLED: LIBRARY: W3LIB - GBYTE GBYTES</p>
<p>REMARKS: ERROR RETURNS: IPTR(1) = 1 'BUFR' NOT FOUND IN FIRST 125 CHARACTERS = 2 '7777' NOT FOUND IN LOCATION DETERMINED BY BY USING COUNTS FOUND IN EACH SECTION. ONE OR MORE SECTIONS HAVE AN ERRONEOUS BYTE COUNT OR CHARACTERS '7777' ARE NOT IN TEST MESSAGE. = 3 MESSAGE CONTAINS A DESCRIPTOR WITH F=0 THAT DOES NOT EXIST IN TABLE B. = 4 MESSAGE CONTAINS A DESCRIPTOR WITH F=3 THAT DOES NOT EXIST IN TABLE D. = 5 MESSAGE CONTAINS A DESCRIPTOR WITH F=2 WITH THE VALUE OF X OUTSIDE THE RANGE 1-5. = 6 DESCRIPTOR ELEMENT INDICATED TO HAVE A FLAG VALUE DOES NOT HAVE AN ENTRY IN THE FLAG TABLE. (TO BE ACTIVATED) = 7 DESCRIPTOR INDICATED TO HAVE A CODE VALUE DOES NOT HAVE AN ENTRY IN THE CODE TABLE. (TO BE ACTIVATED) = 8 ERROR READING TABLE D = 9 ERROR READING TABLE B = 10 ERROR READING CODE/FLAG TABLE = 11 DESCRIPTOR 2 04 004 NOT FOLLOWED BY 0 31 021 = 12 DATA DESCRIPTOR OPERATOR QUALIFIER DOES NOT FOLLOW DELAYED REPLICATION DESCRIPTOR. = 13 BIT WIDTH ON ASCII CHARACTERS NOT A MULTIPLE OF 8 = 14 SUBSETS = 0, NO CONTENT BULLETIN = 20 EXCEEDED COUNT FOR DELAYED REPLICATION PASS = 21 EXCEEDED COUNT FOR NON-DELAYED REPLICATION PASS = 27 NON ZERO LOWEST ON TEXT DATA = 28 NBINC NOT NR OF CHARACTERS = 29 TABLE B APPEARS TO BE DAMAGED = 99 NO MORE SUBSETS (REPORTS) AVAILABLE IN CURRENT BUFR MESAGE</p>
<p>= 400 NUMBER OF SUBSETS EXCEEDS THE VALUE OF INPUT ARGUMENT MAXR; MUST INCREASE MAXR TO VALUE OF IDENT(14) IN CALLING PROGRAM</p>
<p>= 401 NUMBER OF PARAMETERS (AND ASSOCIATED FIELDS) EXCEEDS LIMITS OF THIS PROGRAM. = 500 VALUE FOR NBINC HAS BEEN FOUND THAT EXCEEDS STANDARD WIDTH PLUS ANY BIT WIDTH CHANGE. CHECK ALL BIT WIDTHS UP TO POINT OF ERROR. = 501 CORRECTED WIDTH FOR DESCRIPTOR IS 0 OR LESS</p>
<p>ON THE INITIAL CALL TO W3FI78 WITH A BUFR MESSAGE THE ARGUMENT INDEX MUST BE SET TO ZERO (INDEX = 0). ON THE RETURN FROM W3FI78 'INDEX' WILL BE SET TO THE NEXT AVAILABLE SUBSET/REPORT. WHEN THERE ARE NO MORE SUBSETS AVAILABLE A 99 ERR RETURN WILL OCCUR.</p>
<p>IF THE ORIGINAL BUFR MESSAGE DOES NOT CONTAIN DELAYED REPLICATION THE BUFR MESSAGE WILL BE COMPLETELY DECODED AND 'INDEX' WILL POINT TO THE FIRST DECODED SUBSET. THE USERS WILL THEN HAVE THE OPTION OF INDEXING THROUGH THE SUBSETS ON THEIR OWN OR BY RECALLING THIS ROUTINE (WITHOUT RESETTING 'INDEX') TO HAVE THE ROUTINE DO THE INDEXING.</p>
<p>IF THE ORIGINAL BUFR MESSAGE DOES CONTAIN DELAYED REPLICATION ONE SUBSET/REPORT WILL BE DECODED AT A TIME AND PASSED BACK TO THE USER. THIS IS NOT AN OPTION.</p>
<hr  />
 <h2><a class="anchor" id="autotoc_md6"></a>
TO USE THIS ROUTINE</h2>
<ol type="1">
<li>READ IN BUFR MESSAGE</li>
<li>SET INDEX = 0</li>
<li>CALL W3FI78(        )</li>
<li>IF (IPTR(1).EQ.99) THEN NO MORE SUBSETS EITHER GO TO 1 OR TERMINATE IN NO MORE BUFR MESSAGES END IF</li>
<li>IF (IPTR(1).NE.0) THEN ERROR CONDITION EITHER GO TO 1 OR TERMINATE IN NO MORE BUFR MESSAGES END IF</li>
<li>THE VALUE OF INDEX INDICATES THE ACTIVE SUBSET SO IF INTERESTED IN GENERATING AN IFOD MESSAGE CALL W3FL05 ( ) ELSE PROCESS DECODED INFORMATION AS REQUIRED END IF </li>
</ol>
<h1><a class="anchor" id="autotoc_md7"></a>
7. GO TO 3</h1>
<p>THE ARRAYS TO CONTAIN THE OUTPUT INFORMATION ARE DEFINED AS FOLLOWS: </p><pre class="fragment">KDATA(A,B)  IS THE A DATA ENTRY  (INTEGER VALUE)
            WHERE A IS THE MAXIMUM NUMBER OF REPORTS/SUBSETS
            THAT MAY BE CONTAINED IN THE BUFR MESSAGE (THIS
            IS NOW SET TO "MAXR" WHICH IS PASSED AS AN INPUT
            ARGUMENT TO W3FI78), AND WHERE B IS THE MAXIMUM
            NUMBER OF DESCRIPTOR COMBINATIONS THAT MAY
            BE PROCESSED (THIS IS NOW SET TO "MAXD" WHICH
            IS ALSO PASSED AS AN INPUT ARGUMENT TO W3FI78;
            UPPER AIR DATA AND SOME SATELLITE DATA REQUIRE
            A VALUE FOR MAXD OF 1600, BUT FOR MOST OTHER
            DATA A VALUE FOR MAXD OF 500 WILL SUFFICE)
MSTACK(1,B) CONTAINS THE DESCRIPTOR THAT MATCHES THE
            DATA ENTRY (MAX. VALUE FOR B IS NOW "MAXD"
            WHICH IS PASSED AS AN INPUT ARGUMENT TO W3FI78)
MSTACK(2,B) IS THE SCALE (POWER OF 10) TO BE APPLIED TO
            THE DATA (MAX. VALUE FOR B IS NOW "MAXD"
            WHICH IS PASSED AS AN INPUT ARGUMENT TO W3FI78)
</pre><p>ATTRIBUTES: LANGUAGE: CRAY CFT77 FORTRAN 77 MACHINE: CRAY Y-MP8/832 </p>

<p class="definition">Definition at line <a class="el" href="w3fi78_8f_source.html#l00356">356</a> of file <a class="el" href="w3fi78_8f_source.html">w3fi78.f</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="w3fi78_8f.html">w3fi78.f</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
